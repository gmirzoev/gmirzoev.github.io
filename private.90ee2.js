(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{170:
/*!************************************!*\
  !*** ./utils/index.ts + 2 modules ***!
  \************************************/
/*! exports provided: Utils, Logger */
/*! exports used: Utils */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-redux-toastr/lib/index.js (<- Module is not an ECMAScript module) */function(e,t,a){"use strict";var n=a(16);class r{static getConfig(){return{stand:{API_HOST:"https://api.themoviedb.org",API_VERSION:"3",API_KEY:"0a18b273ecf791e0a3e826bc4ccdb607"},tmdb:window.__TMDB_CONFIG__}}static handleError(e="Unknown error occured",t=""){throw n.toastr.error(t,e),new Error(e)}static createTmdbUrl(e){const{API_HOST:t,API_VERSION:a,API_KEY:n}=r.getConfig().stand;let o=`${t}/${a}${"/"===e[0]?"":"/"}${e}`;return e.includes("?")?o+=`&api_key=${n}`:o+=`?api_key=${n}`,o}static debounce(e,t=100,a=null){let n;return function(...r){clearTimeout(n),n=window.setTimeout(()=>e.apply(a,r),t)}}static wait(e=0){return new Promise(t=>setTimeout(t,e))}}a.d(t,"a",function(){return r})},172:
/*!********************************!*\
  !*** ./actions/authActions.ts ***!
  \********************************/
/*! exports provided: login, logout */
/*! exports used: login, logout */function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i});var n=a(/*! constants/actionTypes */2),r=a(/*! utils */170);function o(e,t){return{type:n.a.LOGIN,payload:async()=>{await r.a.wait(500);const a=JSON.parse(localStorage.getItem("users")||"[]").find(a=>a.login===e.toLowerCase()&&a.password===t);return a?(sessionStorage.setItem("user",JSON.stringify(a)),{user:a}):r.a.handleError("User not found")}}}function i(){return{type:n.a.LOGOUT,payload:async()=>(await r.a.wait(200),sessionStorage.removeItem("user"),!0)}}},173:
/*!***************************************!*\
  !*** ./components/Footer/Footer.scss ***!
  \***************************************/
/*! no static exports found */
/*! exports used: footer, poweredByLogo, poweredByText */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={footer:"_1BHfS","powered-by-text":"_2yu9A",poweredByText:"_2yu9A","powered-by-logo":"_3BLsl",poweredByLogo:"_3BLsl"}},177:
/*!************************************************!*\
  !*** ./components/Footer/index.ts + 1 modules ***!
  \************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Footer/Footer.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,a){"use strict";var n=a(0),r=a(173);class o extends n.Component{render(){return n.createElement("footer",{className:r.footer},n.createElement("span",{className:r.poweredByText},"This product uses the TMDb API but is not endorsed or certified by TMDb."),n.createElement("div",{className:r.poweredByLogo}))}}a.d(t,"a",function(){return o})},261:
/*!***************************************!*\
  !*** ./components/Header/Header.scss ***!
  \***************************************/
/*! no static exports found */
/*! exports used: header, headerLogo, headerNavBtn, headerNavBtnActive, headerNavBtnItem, headerNavBtnItemOne, headerNavBtnItemThree, headerNavBtnItemTwo */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={header:"_3AxUE","header-logo":"_3iUrw",headerLogo:"_3iUrw","header-nav-btn":"_17aDI",headerNavBtn:"_17aDI","header-nav-btn-item":"HfpnC",headerNavBtnItem:"HfpnC","header-nav-btn-active":"_1nwk0",headerNavBtnActive:"_1nwk0","header-nav-btn-item-one":"_2V-rk",headerNavBtnItemOne:"_2V-rk","header-nav-btn-item-two":"_3CPdv",headerNavBtnItemTwo:"_3CPdv","header-nav-btn-item-three":"_1P0zZ",headerNavBtnItemThree:"_1P0zZ"}},262:
/*!**************************************************************************!*\
  !*** ../node_modules/react-router-dom/node_modules/invariant/browser.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";e.exports=function(e,t,a,n,r,o,i,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[a,n,r,o,i,s],p=0;(c=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},263:
/*!***********************************************!*\
  !*** ./components/Navigation/Navigation.scss ***!
  \***********************************************/
/*! no static exports found */
/*! exports used: nav, navActive, navLink, navLinkActive, navLogout, navStubItem, navTitle */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={nav:"_2Zc3P","nav-stub-item":"YIjLE",navStubItem:"YIjLE","nav-active":"_1Kz3P",navActive:"_1Kz3P","nav-title":"_3vlus",navTitle:"_3vlus","nav-link":"_1e_o3",navLink:"_1e_o3","nav-link-active":"_3p3o0",navLinkActive:"_3p3o0","nav-logout":"_3kRG1",navLogout:"_3kRG1"}},264:
/*!***********************************!*\
  !*** ./components/Main/Main.scss ***!
  \***********************************/
/*! no static exports found */
/*! exports used: main, mainInnerWrapper */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={main:"_5VFCG","main-inner-wrapper":"_3xLqV",mainInnerWrapper:"_3xLqV"}},265:
/*!***************************************************!*\
  !*** ./components/AppInitError/AppInitError.scss ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: initError, initErrorText */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"init-error":"_ZOD4",initError:"_ZOD4","init-error-text":"_30v0c",initErrorText:"_30v0c"}},266:
/*!***************************************************************!*\
  !*** ./components/PrivatePagesLayout/PrivatePagesLayout.scss ***!
  \***************************************************************/
/*! no static exports found */
/*! exports used: privatePagesLayout */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"private-pages-layout":"_16eii",privatePagesLayout:"_16eii"}},267:
/*!***********************************************************!*\
  !*** ./components/MoviesPagination/MoviesPagination.scss ***!
  \***********************************************************/
/*! no static exports found */
/*! exports used: moviesPagination, moviesPaginationItem, moviesPaginationItemActive, moviesPaginationWrapper */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"movies-pagination":"TtTb_",moviesPagination:"TtTb_","movies-pagination-wrapper":"_3QzCP",moviesPaginationWrapper:"_3QzCP","movies-pagination-item":"_3dH28",moviesPaginationItem:"_3dH28","movies-pagination-item-active":"_3ManY",moviesPaginationItemActive:"_3ManY"}},268:
/*!*********************************************!*\
  !*** ./components/MovieCard/MovieCard.scss ***!
  \*********************************************/
/*! no static exports found */
/*! exports used: movieCard, movieCardImage, movieCardInfo, movieCardWrapper */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"movie-card":"_2Eutj",movieCard:"_2Eutj","movie-card-wrapper":"_3pn9h",movieCardWrapper:"_3pn9h","movie-card-image":"JJa4z",movieCardImage:"JJa4z","movie-card-info":"_3t6rO",movieCardInfo:"_3t6rO"}},269:
/*!***************************************!*\
  !*** ./components/Movies/Movies.scss ***!
  \***************************************/
/*! no static exports found */
/*! exports used: movies */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={movies:"_1LpmI"}},270:
/*!*******************************************!*\
  !*** ./components/Search/SearchForm.scss ***!
  \*******************************************/
/*! no static exports found */
/*! exports used: searchForm, searchFormBtn, searchFormError, searchFormInput, searchFormInputWrapper */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"search-form":"_2P0bW",searchForm:"_2P0bW","search-form-input-wrapper":"_3k_KB",searchFormInputWrapper:"_3k_KB","search-form-input":"_4HpCX",searchFormInput:"_4HpCX","search-form-btn":"kD-T_",searchFormBtn:"kD-T_","search-form-error":"_16zk3",searchFormError:"_16zk3"}},271:
/*!*****************************************!*\
  !*** ./components/NoMatch/NoMatch.scss ***!
  \*****************************************/
/*! no static exports found */
/*! exports used: noMatch */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){e.exports={"no-match":"_2eqOQ",noMatch:"_2eqOQ"}},272:
/*!*******************************************************!*\
  !*** ./components/PrivatePages/index.ts + 30 modules ***!
  \*******************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/authActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Footer/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/LoadingIndicator/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./constants/actionTypes.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./utils/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/history/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/AppInitError/AppInitError.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Header/Header.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Main/Main.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/MovieCard/MovieCard.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Movies/Movies.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/MoviesPagination/MoviesPagination.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Navigation/Navigation.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/NoMatch/NoMatch.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/PrivatePagesLayout/PrivatePagesLayout.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Search/SearchForm.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/prop-types/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-redux/es/index.js (<- Module is referenced from these modules with unsupported syntax: ../node_modules/react-redux-toastr/lib/ReduxToastr.js (referenced with cjs require), ../node_modules/redux-form/lib/ConnectedField.js (referenced with cjs require), ../node_modules/redux-form/lib/createReduxForm.js (referenced with cjs require)) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router-dom/es/Redirect.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router-dom/es/Route.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router-dom/es/Switch.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router-dom/node_modules/invariant/browser.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/redux-form/lib/Field.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/redux-form/lib/reduxForm.js (<- Module is not an ECMAScript module) */function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(169),i=a(167),s=a(168),c=a(12),l=a(2),p=a(170);var m=a(172),u=a(27),h=a(1),v=a.n(h),d=a(262),g=a.n(d),f=a(10),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},b=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return a=n=_(this,e.call.apply(e,[this].concat(o))),n.handleClick=function(e){if(n.props.onClick&&n.props.onClick(e),!e.defaultPrevented&&0===e.button&&!n.props.target&&!E(e)){e.preventDefault();var t=n.context.router.history,a=n.props,r=a.replace,o=a.to;r?t.replace(o):t.push(o)}},_(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),a=e.innerRef,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["replace","to","innerRef"]);g()(this.context.router,"You should not use <Link> outside a <Router>"),g()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,i="string"==typeof t?Object(f.b)(t,null,null,o.location):t,s=o.createHref(i);return r.a.createElement("a",y({},n,{onClick:this.handleClick,href:s,ref:a}))},t}(r.a.Component);b.propTypes={onClick:v.a.func,target:v.a.string,replace:v.a.bool,to:v.a.oneOfType([v.a.string,v.a.object]).isRequired,innerRef:v.a.oneOfType([v.a.string,v.a.func])},b.defaultProps={replace:!1},b.contextTypes={router:v.a.shape({history:v.a.shape({push:v.a.func.isRequired,replace:v.a.func.isRequired,createHref:v.a.func.isRequired}).isRequired}).isRequired};var w=b,N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var I=function(e){var t=e.to,a=e.exact,n=e.strict,o=e.location,s=e.activeClassName,c=e.className,l=e.activeStyle,p=e.style,m=e.isActive,u=e["aria-current"],h=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),v="object"===(void 0===t?"undefined":C(t))?t.pathname:t,d=v&&v.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return r.a.createElement(i.a,{path:d,exact:a,strict:n,location:o,children:function(e){var a=e.location,n=e.match,o=!!(m?m(n,a):n);return r.a.createElement(w,N({to:t,className:o?[c,s].filter(function(e){return e}).join(" "):c,style:o?N({},p,l):p,"aria-current":o&&u||null},h))}})};I.propTypes={to:w.propTypes.to,exact:v.a.bool,strict:v.a.bool,location:v.a.object,activeClassName:v.a.string,className:v.a.string,activeStyle:v.a.object,style:v.a.object,isActive:v.a.func,"aria-current":v.a.oneOf(["page","step","location","date","time","true"])},I.defaultProps={activeClassName:"active","aria-current":"page"};var k=I,P=a(261);class x extends n.Component{render(){const{isNavigationVisible:e,onNavigationBtnClick:t}=this.props;return n.createElement("header",{className:P.header},n.createElement(k,{className:P.headerLogo,exact:!0,to:"/movies/now_playing"},"RTMDBFE"),n.createElement("div",{role:"button",tabIndex:0,onClick:t,className:u("js-menu",P.headerNavBtn,{[P.headerNavBtnActive]:e}),"aria-label":"Navigation"},n.createElement("span",{className:u(P.headerNavBtnItem,P.headerNavBtnItemOne)}),n.createElement("span",{className:u(P.headerNavBtnItem,P.headerNavBtnItemTwo)}),n.createElement("span",{className:u(P.headerNavBtnItem,P.headerNavBtnItemThree)})))}}var T=a(263);class O extends n.Component{render(){const{isVisible:e,links:t,onLogout:a}=this.props;return n.createElement("nav",{className:u(T.nav,{[T.navActive]:e})},n.createElement("div",{className:T.navTitle},"Menu"),t.map(e=>n.createElement(k,{key:e.url,className:T.navLink,activeClassName:T.navLinkActive,to:e.url},e.title)),n.createElement("span",{className:T.navStubItem}),n.createElement("div",{className:u(T.navLink,T.navLogout),onClick:a,role:"menuitem",tabIndex:0},"Logout"))}}var S=a(264);class A extends n.Component{render(){return n.createElement("main",{className:S.main},n.createElement("div",{className:S.mainInnerWrapper},this.props.children))}}var L=a(177),j=a(39),B=a(265);class M extends n.Component{render(){return n.createElement("div",{className:B.initError},n.createElement("div",{className:B.initErrorText},"An error has occurred during application initialization."),n.createElement("div",{className:B.initErrorText},"Please, check your internet connection and try to refresh the page."))}}var F=a(266);var R=Object(c.connect)(e=>({isAppInitialized:e.init.isInitialized,initializationError:e.init.error,isNavigationVisible:e.ui.isNavigationVisible}),e=>({handleHideNavigation:()=>{e({type:l.g})},handleToggleNavigation:()=>{e({type:l.l})},handleLogout:()=>{e(Object(m.b)())},getTmdbConfig:()=>{e(function(){const{API_HOST:e,API_VERSION:t,API_KEY:a}=p.a.getConfig().stand,n=`${e}/${t}/configuration?api_key=${a}`;return{type:l.f.FETCH_TMDB_CONF,payload:async()=>{try{const e=await fetch(n);if(!e.ok)throw new Error("Something went wrong while fetching tmdb config");const t=await e.json();return window.__TMDB_CONFIG__=t,null}catch(e){return p.a.handleError(e.message)}}}}())}}))(class extends n.Component{constructor(){super(...arguments),this.navigationEl=null,this.links=[{title:"Now playing",url:"/movies/now_playing"},{title:"Popular",url:"/movies/popular"},{title:"Top",url:"/movies/top_rated"},{title:"Upcoming",url:"/movies/upcoming"},{title:"Search",url:"/search"}],this.handleDocumentClick=(e=>{const t=e.target,a=t.parentNode;!this.navigationEl||this.navigationEl.contains(t)||t.classList.contains("js-menu")||a.classList.contains("js-menu")||this.props.handleHideNavigation()})}componentDidMount(){this.props.getTmdbConfig(),this.navigationEl=document.querySelector("nav"),document.addEventListener("click",this.handleDocumentClick)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick)}render(){const{isAppInitialized:e,initializationError:t,isNavigationVisible:a,handleToggleNavigation:r,handleLogout:o,children:i}=this.props;let s=null;return e&&t?s=n.createElement(M,null):e&&!t&&(s=i),n.createElement("div",{className:F.privatePagesLayout},n.createElement(x,{isNavigationVisible:a,onNavigationBtnClick:r}),n.createElement(O,{isVisible:a,links:this.links,onLogout:o}),n.createElement(A,null,e||t?null:n.createElement(j.a,null),s),n.createElement(L.a,null))}});var $=a(267);const D=(e,t,a)=>{let n=[];return n=e<=a?Array.from(new Array(e),(e,t)=>t+1):t<=Math.ceil(a/2)?Array.from(new Array(a),(e,t)=>t+1):t>=e-Math.ceil(a/2)?Array.from(new Array(e),(e,t)=>t+1).slice(e-a):Array.from(new Array(t+Math.floor(a/2)),(e,t)=>t+1).slice(t-Math.ceil(a/2))};class V extends n.PureComponent{render(){const{pagesCount:e,activePage:t,onPageChange:a}=this.props;if(e<=0)return null;const r=D(e,t,7).map(e=>n.createElement("button",{key:e,className:u($.moviesPaginationItem,{[$.moviesPaginationItemActive]:t===e}),onClick:()=>e!==t&&a(e)},e)),o=n.createElement("button",{key:"«",className:$.moviesPaginationItem,disabled:1===t,onClick:()=>a(1)},"«"),i=n.createElement("button",{key:"»",className:$.moviesPaginationItem,disabled:t===e,onClick:()=>a(e)},"»");return r.unshift(o),r.push(i),n.createElement("div",{className:$.moviesPaginationWrapper},n.createElement("div",{className:$.moviesPagination},r))}}var z=a(268);class q extends n.Component{render(){const{title:e,poster:t,overview:a}=this.props;return n.createElement("div",{className:z.movieCard},n.createElement("div",{className:z.movieCardWrapper},n.createElement("img",{className:z.movieCardImage,src:t,title:e,alt:e}),n.createElement("div",{className:z.movieCardInfo},n.createElement("h3",null,e),n.createElement("span",null,a))))}}class H extends n.Component{render(){const{secure_base_url:e,poster_sizes:t}=p.a.getConfig().tmdb.images;return n.createElement("div",null,this.props.movies.map(a=>{const r=a.poster_path?`${e}${t[3]}${a.poster_path}`:"";return n.createElement(q,{key:a.id,title:a.title,poster:r,overview:`${a.overview.substr(0,200)}...`})}))}}var U=a(269);var K=Object(c.connect)(e=>({isFetching:e.movies.isFetching,pagesCount:e.movies.pages,movies:e.movies.items}),e=>({getMovies:(t,a)=>{e(function(e,t=1){const a=p.a.createTmdbUrl(`/movie/${e}?page=${t}`);return{type:l.b,payload:async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Something went wrong while fetching movies");const t=await e.json();return{movies:t.results,pages:t.total_pages}}catch(e){return p.a.handleError(e.message)}}}}(t,a))}}))(class extends n.Component{constructor(e){super(e),this.changePage=this.changePage.bind(this)}componentDidMount(){const e=parseInt(this.props.match.params.page,10)||1;this.props.getMovies(this.props.match.params.type,e)}componentDidUpdate(e){if(this.props.match.params.type!==e.match.params.type||this.props.match.params.page!==e.match.params.page){const e=parseInt(this.props.match.params.page,10)||1;this.props.getMovies(this.props.match.params.type,e)}}changePage(e){this.props.history.push(`/movies/${this.props.match.params.type}/${e}`)}render(){const{isFetching:e,pagesCount:t,movies:a}=this.props,r=parseInt(this.props.match.params.page,10)||1;return n.createElement("div",{className:U.movies},e?n.createElement(j.a,null):null,n.createElement(V,{pagesCount:t,activePage:r,onPageChange:this.changePage}),n.createElement(H,{movies:a}))}});var W=a(183),Y=a.n(W),J=a(178),G=a.n(J),Z=a(270);class Q extends n.Component{constructor(){super(...arguments),this.searchInput=null}componentDidMount(){this.searchInput&&this.searchInput.focus()}render(){const{type:e,input:t,meta:a}=this.props;return n.createElement("div",{className:Z.searchFormInputWrapper},n.createElement("input",Object.assign({},t,{className:Z.searchFormInput,placeholder:"Search...",type:e,ref:e=>{this.searchInput=e}})),a.active&&a.touched&&a.submitFailed&&a.error&&n.createElement("span",{className:Z.searchFormError},a.error))}}var X=Y()({form:"search",validate:e=>{const t={};return e.search||(t.search="There is nothing to search"),t},initialValues:{search:""}})(class extends n.Component{render(){const{handleSubmit:e,submitting:t}=this.props;return n.createElement("form",{className:Z.searchForm,onSubmit:e},n.createElement(G.a,{name:"search",type:"text",component:Q}),n.createElement("button",{className:Z.searchFormBtn,type:"submit",disabled:t},"Search"))}});var ee=Object(c.connect)(e=>({isFetching:e.search.isFetching,movies:e.search.items}),e=>({searchMovies:(t,a)=>{e(function(e,t){const a=p.a.createTmdbUrl(`/search/movie?query=${e}&page=${t}`);return{type:l.h,payload:async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Something went wrong while fetching search");const t=await e.json();return{movies:t.results,pages:t.total_pages}}catch(e){return p.a.handleError(e.message)}}}}(t,a))}}))(class extends n.Component{constructor(e){super(e),this.state={lastSearchRequest:""},this.handleSearchInputChange=p.a.debounce(this.handleSearchInputChange.bind(this),800)}handleSearchInputChange({search:e}){this.state.lastSearchRequest!==e&&(this.setState({lastSearchRequest:e}),this.props.searchMovies(e,1))}render(){const{isFetching:e,movies:t}=this.props;return n.createElement("div",null,e?n.createElement(j.a,null):null,n.createElement(X,{initialValues:{search:this.state.lastSearchRequest},onSubmit:this.handleSearchInputChange}),n.createElement(H,{movies:t}))}}),te=a(271);class ae extends n.Component{render(){return n.createElement("div",{className:te.noMatch},n.createElement("h1",null,"Oops! No such page was found..."))}}class ne extends n.Component{render(){return n.createElement(R,null,n.createElement(o.a,null,n.createElement(i.a,{path:"/movies/:type/:page?",component:K}),n.createElement(i.a,{path:"/search",component:ee}),n.createElement(i.a,{path:"/",exact:!0,component:()=>n.createElement(s.a,{to:"/movies/now_playing"})}),n.createElement(i.a,{component:ae})))}}a.d(t,"default",function(){return ne})}}]);